(this["webpackJsonpdashboard-react"]=this["webpackJsonpdashboard-react"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(30),s=a.n(i),c=a(1),o=a(5),l=a(3),u=a(2),m=a(4),d=a(22),h=a(21),p=a(6),f=a.n(p),b=a(9),g=(a(53),a(11)),v=a(10),E=a(25),S=a(27),y=a.n(S),O=y.a.create({baseURL:"http://localhost:4000/api"});O.defaults.headers.common["x-access-token"]=localStorage.getItem("token");var j=function(){function e(){Object(c.a)(this,e),this._http=void 0,this.url=void 0,this.parentUrl=void 0,this._http=O,this.initialize=this.initialize.bind(this),this.list=this.list.bind(this)}return Object(o.a)(e,[{key:"initialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.url=e,this.parentUrl=t}},{key:"list",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.parentUrl||t?"".concat(this.parentUrl+t).concat(this.url,"/list"):"".concat(this.url,"/list"),e.next=3,this._http.get(a);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(b.a)(f.a.mark((function e(t,a){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parentUrl||a?"".concat(this.parentUrl+a).concat(this.url,"/").concat(t):"".concat(this.url,"/").concat(t),e.next=3,this._http.get(n);case 3:return r=e.sent,i=r.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(b.a)(f.a.mark((function e(t,a){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parentUrl||a?"".concat(this.parentUrl+a).concat(this.url,"/new"):"".concat(this.url,"/new"),e.next=3,this._http.post(n,t);case 3:return r=e.sent,i=r.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(b.a)(f.a.mark((function e(t,a){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parentUrl?"".concat(this.parentUrl).concat(this.url,"/").concat(t):"".concat(this.url,"/").concat(t),e.next=3,this._http.put(n,a);case 3:return r=e.sent,i=r.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(f.a.mark((function e(t,a){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parentUrl||a?"".concat(this.parentUrl+a).concat(this.url,"/").concat(t):"".concat(this.url,"/").concat(t),e.next=3,this._http.delete(n);case 3:return r=e.sent,i=r.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),C=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).initialize("/users"),e.login=e.login.bind(Object(E.a)(e)),e.logout=e.logout.bind(Object(E.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"login",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._http.post("".concat(this.url,"/login"),t);case 2:return a=e.sent,localStorage.setItem("user",JSON.stringify(a.data.user)),localStorage.setItem("token",a.data.token),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._http.get("".concat(this.url,"/logout"));case 2:return t=e.sent,localStorage.setItem("user",null),localStorage.removeItem("token"),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUserLoggedIn",value:function(){return!!localStorage.getItem("token")}},{key:"getById",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._http.get("".concat(this.url,"/me/").concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(j),k=(a(74),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._userService=void 0,a.logoutUser=function(){a._userService.logout().then((function(){window.location.href="/login"}))},a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar admin-header navbar-expand-lg"},r.a.createElement("button",{className:"btn text-muted nav-item d-md-none",style:{marginLeft:this.props.isVisible?"245px":"0"},onClick:this.props.toggleSidebar},r.a.createElement(g.a,{size:"lg",icon:this.props.isVisible?v.f:v.a})),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btn-link text-muted",onClick:this.logoutUser},"Logout ",r.a.createElement(g.a,{icon:v.e})))))}}]),t}(n.Component)),w=(a(75),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderAdminRoutes=function(){var e=(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):"").type;return ae.map((function(t,a){return t.label?"Board"!==e||t.adminOnly?"Admin"===e?r.a.createElement("li",{key:a,className:"sidebarItem"},r.a.createElement(d.c,{exact:!0,to:t.path},t.label)):"":r.a.createElement("li",{key:a,className:"sidebarItem"},r.a.createElement(d.c,{exact:!0,to:t.path},t.label)):""}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("aside",{className:"adminSidebar text-center",style:{left:this.props.isVisible?"0":"-245px"}},r.a.createElement("h1",null," Admin Dashboard "),r.a.createElement("ul",{className:"list-unstyled mt-2"},this.renderAdminRoutes()))}}]),t}(n.Component)),A=(a(78),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isSidebarVisible:!0},a.toggleSidebar=function(){a.setState({isSidebarVisible:!a.state.isSidebarVisible})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{toggleSidebar:this.toggleSidebar,isVisible:this.state.isSidebarVisible}),r.a.createElement("main",{className:"admin-main"},this.props.children),r.a.createElement(w,{isVisible:this.state.isSidebarVisible}))}}]),t}(n.Component)),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._userService=void 0,a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._userService.isUserLoggedIn()||this.props.history.push("/login");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(A,null,r.a.createElement("div",{className:"admin-home d-flex justify-content-center align-items-center"},r.a.createElement("header",{className:"admin-home__header text-center"},r.a.createElement("h2",null,"Welcome to Dashboard"))))}}]),t}(n.Component),M=a(14),T=a(12),x=a(8),B=a.n(x),_=(a(92),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:{code:""},isLoading:!1,success:"",error:""},a._userService=void 0,a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value,i=a.state.user;a.setState({user:Object(T.a)({},i,Object(M.a)({},n,r))})},a.handleSubmit=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.user,a.setState({isLoading:!0}),e.prev=3,e.next=6,a._userService.login(n);case 6:r=e.sent,"Member"===(i=r.data.user.type)?a.setState({isLoading:!1,success:null,error:"You shouldn't be here !"}):"Admin"===i?(a.setState({isLoading:!1,success:"Logged in successfully",error:""}),setTimeout((function(){window.location.href="/"}),2e3)):"Board"===i&&(a.setState({isLoading:!1,success:"Logged in successfully",error:""}),setTimeout((function(){window.location.href="/users"}),2e3)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),a.setState({isLoading:!1,success:null,error:e.t0.response.data.msg});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.success,i=t.error;return r.a.createElement("section",{className:"login-page"},r.a.createElement("div",{className:"login-form-box"},r.a.createElement("h1",{className:"text-center h3 mb-5"}," Login to the dashboard "),r.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Code"),r.a.createElement("input",{type:"text",className:"form-control",name:"code",onChange:this.handleChange,placeholder:"Enter your code .."})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},a?"Logging you in ...":"LOGIN"),n?r.a.createElement(B.a,{show:!!n,success:!0,title:n||" ",timeout:2e3,onConfirm:function(){return e.setState({success:null})}}):i?r.a.createElement(B.a,{show:!!i,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({error:null})}},i):"")))}}]),t}(n.Component));function I(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"loading ... "))}a(93);var D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderTableHeaders=function(){return a.props.config.tableHeaders.map((function(e,t){return"object"===typeof e?r.a.createElement("th",{key:t,scope:"col"},e.name.toUpperCase()):r.a.createElement("th",{key:t,scope:"col"},e.toUpperCase())}))},a.renderTableBody=function(){var e=a.props,t=e.tableBody,n=e.config;return t.map((function(e,t){return r.a.createElement("tr",{key:t},a.props.config.tableHeaders.map((function(t){return"object"===typeof t?r.a.createElement("td",{key:t.name},r.a.createElement(d.b,{to:"".concat(t.href,"/").concat(t.params?e[t.params]:"")},e[t.name])):r.a.createElement("td",{key:t}," ",e[t]," ")})),r.a.createElement("td",null,n.actions.includes("edit")&&a.renderEditBtn(e),n.actions.includes("delete")&&a.renderDeleteBtn(e)))}))},a.renderEditBtn=function(e){var t=a.props.triggerEditEvent;return r.a.createElement("button",{className:"btn btn-secondary mr-2","data-toggle":"modal","data-target":"#editModal",title:"Edit Item",onClick:function(){return t(e,!1,e._id)}},r.a.createElement(g.a,{icon:v.c}))},a.renderDeleteBtn=function(e){var t=a.props.deleteRow;return r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t(e._id,!1)}},r.a.createElement(g.a,{icon:v.g}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.config.className;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"".concat(e," table")},r.a.createElement("thead",null,r.a.createElement("tr",null,this.renderTableHeaders(),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.renderTableBody())))}}]),t}(n.Component),U=(a(24),a(19)),L=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},F=function(e){return 0===e.length},P=(a(97),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={validationMessage:""},a.inputTypes={numericTypes:["number"],textfulTypes:["text","email","password","tel"]},a.isNumericType=function(){return a.inputTypes.numericTypes.includes(a.props.type)},a.isTextFulType=function(){return a.inputTypes.textfulTypes.includes(a.props.type)},a.isRequired=function(){return a.props.required},a.errorPosition=function(){return"top"===a.props.errorPosition?"order-top":"order-bottom"},a.customMessage=function(e,t){var n=a.props.validationMessages;return n&&n[e]||t},a.errorMessage=null,a.validateEmpty=function(e){a.isRequired()&&F(e.value)&&(a.errorMessage=a.customMessage("empty","This field is Required!"))},a.validateEmail=function(e){"email"===a.props.type&&null===a.state.validationMessage&&F(e.value)&&!L(e.value)&&(a.errorMessage=a.customMessage("email","Invalid Email Address"))},a.matchFieldLength=function(e){var t=a.props.length;!F(e.value)&&t&&e.value.length!==t&&(a.errorMessage=a.customMessage("lengthMessage","This field should be ".concat(t," in length")))},a.matchMinValue=function(e){var t=a.props.min;a.isNumericType()&&t&&e.value<t&&(a.errorMessage=a.customMessage("minValueMessage","The minimum value accepted is ".concat(t)))},a.matchMaxValue=function(e){var t=a.props.max;a.isNumericType()&&t&&e.value>t&&(a.errorMessage=a.customMessage("maxValueMessage","The maximum value accepted is ".concat(t)))},a.matchMinLength=function(e){var t=a.props.minLength;a.isTextFulType()&&t&&e.value.length<t&&(a.errorMessage=a.customMessage("minLengthMessage","The field should be at minimum ".concat(t," characters ")))},a.matchMaxLength=function(e){var t=a.props.maxLength;a.isTextFulType()&&t&&e.value.length>t&&(a.errorMessage=a.customMessage("maxLengthMessage","The field should be maximum ".concat(t," characters ")))},a.hasExceededMaxDate=function(e,t){return new Date(e).getTime()>new Date(t).getTime()},a.matchMaxDate=function(e){var t=a.props.maxDate;a.isNumericType()&&t&&a.hasExceededMaxDate(e.value,t)&&(a.errorMessage=a.customMessage("maxDateMessage","The Date should be maximum ".concat(t)))},a.hasExceededMinDate=function(e,t){return new Date(e).getTime()<new Date(t).getTime()},a.matchMinDate=function(e){var t=a.props.minDate;a.isNumericType()&&t&&a.hasExceededMinDate(e.value,t)&&(a.errorMessage=a.customMessage("maxDateMessage","The Date should be minimum ".concat(t)))},a.matchTextPattern=function(e){var t=a.props,n=t.type,r=t.regPattern,i=new RegExp("".concat(r),"g");"text"===n&&r&&!i.test(e.value)&&(a.errorMessage=a.customMessage("matchPattern","The string should match pattern provided"))},a.validateField=function(e){var t=e.target,n=[a.validateEmpty,a.validateEmail,a.matchFieldLength,a.matchMinValue,a.matchMinValue,a.matchMaxLength,a.matchMinLength,a.matchMaxDate,a.matchMinDate,a.matchTextPattern];a.errorMessage=null;for(var r=0,i=n;r<i.length;r++){if((0,i[r])(t),a.errorMessage)break}a.setState({validationMessage:a.errorMessage}),a.props.onInput&&a.props.onInput(e)},a.isAcceptableProp=function(e){return"object"!==typeof e&&!["type","required","minLength","maxLength","length","min","validationMessages","errorPosition","minDate","maxDate","regPattern","options"].includes(e)},a.getAcceptedProps=function(){var e={};for(var t in a.props)("function"===typeof a.props[t]||a.isAcceptableProp(t))&&(e[t]=a.props[t]);return e},a.addClass=function(e){a.props.className&&e.target.classList.add(a.props.className)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.options,n=e.className,i=e.label,s=e.id,c=e.value;return r.a.createElement("section",{className:"input-wrapper"},null!==this.state.validationMessage&&r.a.createElement("span",{className:"error ".concat(this.errorPosition()," text-red")},this.state.validationMessage),i&&r.a.createElement("label",{htmlFor:s}," ",i," "),"select"===t?r.a.createElement("select",Object.assign({onChange:this.validateField},this.getAcceptedProps()),r.a.createElement("option",{value:"",disabled:!0},"Choose ",i),a&&a.map((function(e,t){return r.a.createElement("option",{value:e,key:t}," ",e," ")}))):"textarea"===t?r.a.createElement("textarea",Object.assign({},this.getAcceptedProps(),{className:"form-control ".concat(n),onInput:this.validateField})):r.a.createElement("input",Object.assign({},this.getAcceptedProps(),{type:"int"===t||"float"===t||"number"===t?"number":t,className:"form-control ".concat(n),onInput:this.validateField,value:c||""})))}}]),t}(n.Component)),q=function(e){var t=new FormData;return t.append("file",e),t.append("api_key",293517195754478),t.append("upload_preset","z1ti5v7g"),t.append("api_secret","AUjmulQdxBkHMas_wgPzdmIWM8I"),y.a.post("https://api.cloudinary.com/v1_1/dykflps8g/image/upload",t)},V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={isImageUploaded:!1,image:""},a.handleImageInputChange=function(e){var t=a.props.setImageUpload,n=e.currentTarget.files;t(!0),q(n&&n[0]).then((function(e){a.setState({isImageUploaded:!0,image:e.data.secure_url}),t(!1,e.data.secure_url)}))},a.renderImageUpload=function(){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cover"},"Upload Image"),r.a.createElement("input",{type:"file",onChange:a.handleImageInputChange,className:"form-control-file",id:"cover",accept:"image/*",name:a.props.name||"cover"}))},a.renderImagePreview=function(){return r.a.createElement("section",{className:"img-preview"},r.a.createElement("img",{src:a.state.image||a.props.imgUrl,className:"d-block",width:"100%",alt:"Preview"}),r.a.createElement("span",{onClick:a.removeImage,className:"preview-dismiss"},r.a.createElement(g.a,{icon:v.f})))},a.removeImage=function(){a.setState({isImageUploaded:!1,image:""})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.imgUrl!==this.state.image&&this.props.imgUrl!==e.imgUrl&&this.setState({image:this.props.imgUrl})}},{key:"render",value:function(){var e=this.state,t=e.isImageUploaded,a=e.image;return r.a.createElement(r.a.Fragment,null,t||a?this.renderImagePreview():this.renderImageUpload())}}]),t}(n.Component),Y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={achievement:{title:"",date:"",description:"",cover:""},isLoading:!1,isImageUploading:!1},a.setImageUpload=function(e,t){a.setState({isImageUploading:e}),t&&a.setState({achievement:Object(T.a)({},a.state.achievement,{cover:t})})},a.formatDate=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState({achievement:Object(T.a)({},a.state.achievement,Object(M.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.achievement;a.setState({achievement:Object(T.a)({},t,{date:a.formatDate()})},(function(){a.props.onSubmit(a.state.achievement,!0).then((function(){a.setState({achievement:t}),a.resetObj(t)}))}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.itemToBeEdited;e&&(e.date=this.formatDate(),this.setState({achievement:e}))}},{key:"resetObj",value:function(e){for(var t in e)e[t]=""}},{key:"render",value:function(){var e=this.props,t=e.isModalOpened,a=e.itemToBeEdited,n=e.closeModal,i=e.isSubmitting,s=this.state,c=s.achievement,o=s.isLoading,l=s.isImageUploading;return r.a.createElement(U.Modal,{open:t,onClose:function(){return n()},center:!0,styles:{modal:{animation:"".concat(t?"customEnterAnimation":"customLeaveAnimation"," 500ms")}}},o?r.a.createElement(I,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mb-3"}," Achievement "),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement(P,{type:"text",required:!0,placeholder:"achievement title",label:"Title",id:"title",name:"title",errorPosition:"bottom",value:c.title,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement(P,{type:"textarea",required:!0,label:"description",id:"description",name:"description",rows:"5",errorPosition:"bottom",value:c.description,onChange:this.handleChange}))),r.a.createElement(V,{imgUrl:c.cover,setImageUpload:this.setImageUpload}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:i||l},l?"Uploading...":i?"Loading ...":a?"Save":"Create"))))}}]),t}(n.Component),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).parentUrl=void 0,e.initialize("/achievements","users/"),e}return Object(m.a)(t,e),t}(j),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).tableConfig={tableHeaders:["title"],className:"table-striped",actions:["edit","delete"]},a.state={achievements:a.props.achievements,successAlert:"",errorAlert:"",achievementToBeEdited:{},isLoading:!1,isCreateModalOpened:!1,isSubmitting:!1,idOfItemToBeDeleted:""},a._achievementService=void 0,a.createAchievement=function(e){var t=a.state.achievements;return a.setState({isSubmitting:!0}),a._achievementService.create(e,a.props.userId).then((function(e){t.unshift(e),a.setState({achievements:t,successAlert:"Achievement added successfully",errorAlert:"",isCreateModalOpened:!1,isSubmitting:!1})})).catch((function(e){a.setState({errorAlert:"An error occurred",successAlert:"",isSubmitting:!1})}))},a.editAchievement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.achievementToBeEdited._id;if(t)return a.setState({isSubmitting:!0}),a._achievementService.update(n,e).then((function(e){a.updateStateWithNewAchievement(e),a.setState({isSubmitting:!1,successAlert:"Achievement updated successfully",errorAlert:"",achievementToBeEdited:{}})})).catch((function(e){a.setState({errorAlert:e.response.data.msg})}));a.setState({isSubmitting:!1,achievementToBeEdited:e})},a.updateStateWithNewAchievement=function(e){var t=a.state.achievements,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1,e),a.setState({achievements:t})},a.removeAchievement=function(e,t){var n=a.state.achievements;t?a._achievementService.delete(e,a.props.userId).then((function(){a.setState({achievements:n.filter((function(t){return t._id!==e}))})})):a.setState({idOfItemToBeDeleted:e})},a._achievementService=new R,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.achievements,n=t.successAlert,i=t.errorAlert,s=t.achievementToBeEdited,c=t.idOfItemToBeDeleted,o=t.isLoading,l=t.isCreateModalOpened,u=t.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"d-flex justify-content-between container mt-5"},r.a.createElement("h3",null," Achievements "),r.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({isCreateModalOpened:!0})}},r.a.createElement(g.a,{icon:v.d})," Create New Achievement")),o?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(I,null)):a&&a.length>0?r.a.createElement("div",{className:"container mt-5"},r.a.createElement(D,{config:this.tableConfig,triggerEditEvent:this.editAchievement,deleteRow:this.removeAchievement,tableBody:a})):r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("p",null,"No Achievements yet")),Object.keys(s).length>1&&r.a.createElement(Y,{isModalOpened:Object.keys(s).length>1,itemToBeEdited:s,onSubmit:this.editAchievement,isSubmitting:u,closeModal:function(){return e.setState({achievementToBeEdited:{}})}}),r.a.createElement(Y,{isModalOpened:l,isSubmitting:u,onSubmit:this.createAchievement,closeModal:function(){return e.setState({isCreateModalOpened:!1})}}),r.a.createElement(B.a,{show:!!n,success:!0,title:n||" ",timeout:2e3,onConfirm:function(){return e.setState({successAlert:null})}}),r.a.createElement(B.a,{show:!!i,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({errorAlert:null})}},i),r.a.createElement(B.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",onConfirm:function(){e.removeAchievement(c,!0),e.setState({idOfItemToBeDeleted:""})},onCancel:function(){return e.setState({idOfItemToBeDeleted:""})},focusCancelBtn:!0,show:!!c},"You will not be able to recover this item !"))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={feedback:{title:"",body:"",date:""},isLoading:!1},a.formatDate=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState({feedback:Object(T.a)({},a.state.feedback,Object(M.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.feedback;a.setState({feedback:Object(T.a)({},t,{date:a.formatDate()})},(function(){a.props.onSubmit(a.state.feedback,!0).then((function(){a.setState({feedback:t}),a.resetObj(t)}))}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.itemToBeEdited;e&&(e.date=this.formatDate(),this.setState({feedback:e}))}},{key:"resetObj",value:function(e){for(var t in e)e[t]=""}},{key:"render",value:function(){var e=this.props,t=e.isModalOpened,a=e.itemToBeEdited,n=e.closeModal,i=e.isSubmitting,s=this.state,c=s.feedback,o=s.isLoading;return r.a.createElement(U.Modal,{open:t,onClose:function(){return n()},center:!0,styles:{modal:{animation:"".concat(t?"customEnterAnimation":"customLeaveAnimation"," 500ms")}}},o?r.a.createElement(I,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mb-3"}," Feedback "),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement(P,{type:"text",required:!0,placeholder:"feedback title",label:"Title",id:"title",name:"title",errorPosition:"bottom",value:c.title,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement(P,{type:"textarea",required:!0,label:"body",id:"body",name:"body",rows:"5",errorPosition:"bottom",value:c.body,onChange:this.handleChange}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:i},i?"Loading ...":a?"Save":"Create"))))}}]),t}(n.Component),W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).parentUrl=void 0,e.initialize("/feedbacks","users/"),e}return Object(m.a)(t,e),t}(j),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).tableConfig={tableHeaders:["title"],className:"table-striped",actions:["edit","delete"]},a.state={feedbacks:a.props.feedbacks,successAlert:"",errorAlert:"",feedbackToBeEdited:{},isLoading:!1,isCreateModalOpened:!1,isSubmitting:!1,idOfItemToBeDeleted:""},a._feedbackService=void 0,a.createFeedback=function(e){var t=a.state.feedbacks;return a.setState({isSubmitting:!0}),a._feedbackService.create(e,a.props.userId).then((function(e){t.unshift(e),a.setState({feedbacks:t,successAlert:"Feedback added successfully",errorAlert:"",isCreateModalOpened:!1,isSubmitting:!1})})).catch((function(e){a.setState({errorAlert:"An error occurred",successAlert:"",isSubmitting:!1})}))},a.editFeedback=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.feedbackToBeEdited._id;if(t)return a.setState({isSubmitting:!0}),a._feedbackService.update(n,e).then((function(e){a.updateStateWithNewFeedback(e),a.setState({isSubmitting:!1,successAlert:"Feedback updated successfully",errorAlert:"",feedbackToBeEdited:{}})})).catch((function(e){a.setState({errorAlert:e.response.data.msg})}));a.setState({isSubmitting:!1,feedbackToBeEdited:e})},a.updateStateWithNewFeedback=function(e){var t=a.state.feedbacks,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1,e),a.setState({feedbacks:t})},a.removeFeedback=function(e,t){var n=a.state.feedbacks;t?a._feedbackService.delete(e,a.props.userId).then((function(){a.setState({feedbacks:n.filter((function(t){return t._id!==e}))})})):a.setState({idOfItemToBeDeleted:e})},a._feedbackService=new W,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.feedbacks,n=t.successAlert,i=t.errorAlert,s=t.feedbackToBeEdited,c=t.idOfItemToBeDeleted,o=t.isLoading,l=t.isCreateModalOpened,u=t.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"d-flex justify-content-between container mt-5"},r.a.createElement("h3",null," Feedbacks "),r.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({isCreateModalOpened:!0})}},r.a.createElement(g.a,{icon:v.d})," Create New Feedback")),o?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(I,null)):a&&a.length>0?r.a.createElement("div",{className:"container mt-5"},r.a.createElement(D,{config:this.tableConfig,triggerEditEvent:this.editFeedback,deleteRow:this.removeFeedback,tableBody:a})):r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("p",null,"No Feedbacks yet")),Object.keys(s).length>1&&r.a.createElement(H,{isModalOpened:Object.keys(s).length>1,itemToBeEdited:s,onSubmit:this.editFeedback,isSubmitting:u,closeModal:function(){return e.setState({feedbackToBeEdited:{}})}}),r.a.createElement(H,{isModalOpened:l,isSubmitting:u,onSubmit:this.createFeedback,closeModal:function(){return e.setState({isCreateModalOpened:!1})}}),r.a.createElement(B.a,{show:!!n,success:!0,title:n||" ",timeout:2e3,onConfirm:function(){return e.setState({successAlert:null})}}),r.a.createElement(B.a,{show:!!i,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({errorAlert:null})}},i),r.a.createElement(B.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",onConfirm:function(){e.removeFeedback(c,!0),e.setState({idOfItemToBeDeleted:""})},onCancel:function(){return e.setState({idOfItemToBeDeleted:""})},focusCancelBtn:!0,show:!!c},"You will not be able to recover this item !"))}}]),t}(n.Component),G=(a(98),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:{},currentTab:"achievements",errorAlert:"",isLoading:!1},a._userService=void 0,a.switchTabs=function(e){a.setState({currentTab:e})},a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._userService.isUserLoggedIn()){e.next=2;break}return e.abrupt("return",this.props.history.push("/login"));case 2:return this.setState({isLoading:!0}),e.prev=3,t=this.props.match.params.id,e.next=7,this._userService.getById(t);case 7:a=e.sent,this.setState({user:a,isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),this.setState({errorAlert:"User not found",isLoading:!1}),setTimeout((function(){return n.props.history.push("/users")}),1e3);case 15:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.errorAlert,n=t.isLoading,i=t.currentTab,s=this.state.user,c=s.name,o=s.email,l=s.phone,u=s.image,m=s.achievements,d=s.feedbacks,h=this.props.match.params.id;return r.a.createElement(A,null,n?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(I,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"d-flex align-items-center container mt-5 profile__header"},r.a.createElement("img",{src:u,alt:"",width:"200"}),r.a.createElement("h2",{className:"mt-3"}," ",c," "),r.a.createElement("p",null," ",o," "),r.a.createElement("p",null," ",l," ")),r.a.createElement("section",{className:"profile__data mt-5"},r.a.createElement("aside",{className:"profile__controls"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:"btn btn-lg ".concat("achievements"===i&&"btn-active"),onClick:function(){return e.switchTabs("achievements")}},"Achievements"),r.a.createElement("button",{className:"btn btn-lg ".concat("feedbacks"===i&&"btn-active"),onClick:function(){return e.switchTabs("feedbacks")}},"Feedbacks"))),r.a.createElement("main",{className:"profile__content p-2"},r.a.createElement("div",{className:"container"},"achievements"===i?r.a.createElement("section",{className:"achievements-data"},r.a.createElement(z,{userId:h,achievements:m})):r.a.createElement("section",{className:"feedbacks-data"},r.a.createElement(J,{userId:h,feedbacks:d})))))),r.a.createElement(B.a,{show:!!a,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({errorAlert:null})}},a))}}]),t}(n.Component)),Z=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).initialize("/committees"),e}return Object(m.a)(t,e),t}(j),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:{name:"",email:"",code:"",phone:"",image:"",role:"",type:"",committee:""},committees:[],isLoading:!1,isImageUploading:!1},a._committeeService=void 0,a.setImageUpload=function(e,t){a.setState({isImageUploading:e}),t&&a.setState({user:Object(T.a)({},a.state.user,{image:t})})},a.formatDate=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState({user:Object(T.a)({},a.state.user,Object(M.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.user;a.setState({user:Object(T.a)({},t)},(function(){a.props.onSubmit(a.state.user,!0).then((function(){a.setState({user:t}),a.resetObj(t)}))}))},a.generateCode=function(){var e=Math.floor(1e8+9e8*Math.random());a.setState({user:Object(T.a)({},a.state.user,{code:String(e)})})},a.generateArrayOfCommitteesNames=function(e){var t=[];return e.map((function(e){var a=e.name;return t.push(a)})),t},a._committeeService=new Z,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemToBeEdited;t&&(t.date=this.formatDate(),this.setState({user:t})),this._committeeService.list().then((function(t){e.setState({committees:e.generateArrayOfCommitteesNames(t)})}))}},{key:"resetObj",value:function(e){for(var t in e)e[t]=""}},{key:"render",value:function(){var e=this.props,t=e.isModalOpened,a=e.itemToBeEdited,n=e.closeModal,i=e.isSubmitting,s=this.state,c=s.user,o=s.isLoading,l=s.isImageUploading,u=s.committees;return r.a.createElement(U.Modal,{open:t,onClose:function(){return n()},center:!0,styles:{modal:{animation:"".concat(t?"customEnterAnimation":"customLeaveAnimation"," 500ms")}}},o?r.a.createElement(I,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mb-3"}," Member "),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"text",required:!0,placeholder:"Member name",label:"Name",id:"name",name:"name",errorPosition:"bottom",value:c.name,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"select",className:"form-control",options:["Admin","Board","Member"],required:!0,label:"Type",id:"type",name:"type",errorPosition:"bottom",value:c.type,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"tel",className:"form-control",required:!0,label:"Phone",id:"phone",placeholder:"e.g: 010123456734",name:"phone",errorPosition:"bottom",value:c.phone,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"select",className:"form-control",options:["Member","Head","Officer","Vice head"],required:!0,label:"Role",id:"role",name:"role",errorPosition:"bottom",value:c.role,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"email",className:"form-control",required:!0,label:"Email",id:"email",name:"email",errorPosition:"bottom",value:c.email,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"select",className:"form-control",options:u&&u.length>0?u:[],required:!0,label:"Committee",id:"committee",name:"committee",errorPosition:"bottom",value:c.committee,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-10"},r.a.createElement(P,{type:"text",required:!0,placeholder:"User Code",label:"Code",id:"code",name:"code",errorPosition:"bottom",value:c.code,onChange:this.handleChange})),r.a.createElement("div",{className:"col-md-2 d-flex align-items-center"},r.a.createElement("button",{onClick:this.generateCode,type:"button",title:"Generate Code",className:"btn mt-2"},r.a.createElement(g.a,{icon:v.b})))),r.a.createElement(V,{imgUrl:c.image,name:"image",setImageUpload:this.setImageUpload}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:i||l},l?"Uploading...":i?"Loading ...":a?"Save":"Create"))))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).tableConfig={tableHeaders:[{name:"name",href:"/users",params:"_id"},"email","committee"],className:"table-striped",actions:["edit","delete"]},a.state={users:[],successAlert:"",errorAlert:"",userToBeEdited:{},isLoading:!1,isCreateModalOpened:!1,isSubmitting:!1,idOfItemToBeDeleted:""},a._userService=void 0,a.createUser=function(e){var t=a.state.users;return a.setState({isSubmitting:!0}),a._userService.create(e).then((function(e){t.unshift(e),a.setState({users:t,successAlert:"User added successfully",errorAlert:"",isCreateModalOpened:!1,isSubmitting:!1})})).catch((function(e){a.setState({errorAlert:e.response.data.msg,successAlert:"",isSubmitting:!1})}))},a.editUser=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.userToBeEdited._id;if(t)return a.setState({isSubmitting:!0}),a._userService.update(n,e).then((function(e){a.updateStateWithNewUser(e),a.setState({isSubmitting:!1,successAlert:"User updated successfully",errorAlert:"",userToBeEdited:{}})})).catch((function(e){a.setState({errorAlert:e.response.data.msg})}));a.setState({isSubmitting:!1,userToBeEdited:e})},a.updateStateWithNewUser=function(e){var t=a.state.users,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1,e),a.setState({users:t})},a.removeUser=function(e,t){var n=a.state.users;t?a._userService.delete(e).then((function(){a.setState({users:n.filter((function(t){return t._id!==e}))})})):a.setState({idOfItemToBeDeleted:e})},a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._userService.isUserLoggedIn()){e.next=2;break}return e.abrupt("return",this.props.history.push("/login"));case 2:return this.setState({isLoading:!0}),e.prev=3,e.next=6,this._userService.list();case 6:t=e.sent,this.setState({users:t,isLoading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({errorAlert:"Error retrieving items",isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.successAlert,i=t.errorAlert,s=t.userToBeEdited,c=t.idOfItemToBeDeleted,o=t.isLoading,l=t.isCreateModalOpened,u=t.isSubmitting;return r.a.createElement(A,null,r.a.createElement("header",{className:"d-flex justify-content-between container mt-5"},r.a.createElement("h2",null," Users "),r.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({isCreateModalOpened:!0})}},r.a.createElement(g.a,{icon:v.d})," Create New User")),o?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(I,null)):a.length>0?r.a.createElement("div",{className:"container mt-5"},r.a.createElement(D,{config:this.tableConfig,triggerEditEvent:this.editUser,deleteRow:this.removeUser,tableBody:a})):r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("p",null,"No users yet")),Object.keys(s).length>1&&r.a.createElement(Q,{isModalOpened:Object.keys(s).length>1,itemToBeEdited:s,onSubmit:this.editUser,isSubmitting:u,closeModal:function(){return e.setState({userToBeEdited:{}})}}),r.a.createElement(Q,{isModalOpened:l,isSubmitting:u,onSubmit:this.createUser,closeModal:function(){return e.setState({isCreateModalOpened:!1})}}),r.a.createElement(B.a,{show:!!n,success:!0,title:n||" ",timeout:2e3,onConfirm:function(){return e.setState({successAlert:null})}}),r.a.createElement(B.a,{show:!!i,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({errorAlert:null})}},i),r.a.createElement(B.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",onConfirm:function(){e.removeUser(c,!0),e.setState({idOfItemToBeDeleted:""})},onCancel:function(){return e.setState({idOfItemToBeDeleted:""})},focusCancelBtn:!0,show:!!c},"You will not be able to recover this item !"))}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={announcement:{title:"",body:"",cover:"",type:""},isLoading:!1,isImageUploading:!1},a.setImageUpload=function(e,t){a.setState({isImageUploading:e}),t&&a.setState({announcement:Object(T.a)({},a.state.announcement,{cover:t})})},a.formatDate=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState({announcement:Object(T.a)({},a.state.announcement,Object(M.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.announcement;a.setState({announcement:Object(T.a)({},t,{date:a.formatDate()})},(function(){a.props.onSubmit(a.state.announcement,!0).then((function(){a.setState({announcement:t}),a.resetObj(t)}))}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.itemToBeEdited;e&&(e.date=this.formatDate(),this.setState({announcement:e}))}},{key:"resetObj",value:function(e){for(var t in e)e[t]=""}},{key:"render",value:function(){var e=this.props,t=e.isModalOpened,a=e.itemToBeEdited,n=e.closeModal,i=e.isSubmitting,s=this.state,c=s.announcement,o=s.isLoading,l=s.isImageUploading;return r.a.createElement(U.Modal,{open:t,onClose:function(){return n()},center:!0,styles:{modal:{animation:"".concat(t?"customEnterAnimation":"customLeaveAnimation"," 500ms")}}},o?r.a.createElement(I,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mb-3"}," Announcement "),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"text",required:!0,placeholder:"blog title",label:"Title",id:"title",name:"title",errorPosition:"bottom",value:c.title,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(P,{type:"select",className:"form-control",options:["General","Technical","Operation"],required:!0,label:"Type",id:"type",name:"type",errorPosition:"bottom",value:c.type,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement(P,{type:"textarea",required:!0,label:"body",id:"body",name:"body",rows:"5",errorPosition:"bottom",value:c.body,onChange:this.handleChange}))),r.a.createElement(V,{imgUrl:c.cover,setImageUpload:this.setImageUpload}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:i||l},l?"Uploading...":i?"Loading ...":a?"Save":"Create"))))}}]),t}(n.Component),X=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).initialize("/announcements"),e}return Object(m.a)(t,e),t}(j),ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).tableConfig={tableHeaders:["title","type"],className:"table-striped",actions:["edit","delete"]},a.state={announcements:[],successAlert:"",errorAlert:"",announcementToBeEdited:{},isLoading:!1,isCreateModalOpened:!1,isSubmitting:!1,idOfItemToBeDeleted:""},a._announcementService=void 0,a._userService=void 0,a.createAnnouncement=function(e){var t=a.state.announcements;return a.setState({isSubmitting:!0}),a._announcementService.create(e).then((function(e){t.unshift(e),a.setState({announcements:t,successAlert:"Announcement added successfully",errorAlert:"",isCreateModalOpened:!1,isSubmitting:!1})})).catch((function(e){a.setState({errorAlert:"An error occurred",successAlert:"",isSubmitting:!1})}))},a.editAnnouncement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.announcementToBeEdited._id;if(t)return a.setState({isSubmitting:!0}),a._announcementService.update(n,e).then((function(e){a.updateStateWithNewAnnouncement(e),a.setState({isSubmitting:!1,successAlert:"Announcement updated successfully",errorAlert:"",announcementToBeEdited:{}})})).catch((function(e){a.setState({errorAlert:e.response.data.msg})}));a.setState({isSubmitting:!1,announcementToBeEdited:e})},a.updateStateWithNewAnnouncement=function(e){var t=a.state.announcements,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1,e),a.setState({announcements:t})},a.removeAnnouncement=function(e,t){var n=a.state.announcements;t?a._announcementService.delete(e).then((function(){a.setState({announcements:n.filter((function(t){return t._id!==e}))})})):a.setState({idOfItemToBeDeleted:e})},a._announcementService=new X,a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._userService.isUserLoggedIn()){e.next=2;break}return e.abrupt("return",this.props.history.push("/login"));case 2:return this.setState({isLoading:!0}),e.prev=3,e.next=6,this._announcementService.list();case 6:t=e.sent,this.setState({announcements:t,isLoading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({errorAlert:"Error retrieving items",isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.announcements,n=t.successAlert,i=t.errorAlert,s=t.announcementToBeEdited,c=t.idOfItemToBeDeleted,o=t.isLoading,l=t.isCreateModalOpened,u=t.isSubmitting;return r.a.createElement(A,null,r.a.createElement("header",{className:"d-flex justify-content-between container mt-5"},r.a.createElement("h2",null," Announcements "),r.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({isCreateModalOpened:!0})}},r.a.createElement(g.a,{icon:v.d})," Create New Announcement")),o?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(I,null)):a.length>0?r.a.createElement("div",{className:"container mt-5"},r.a.createElement(D,{config:this.tableConfig,triggerEditEvent:this.editAnnouncement,deleteRow:this.removeAnnouncement,tableBody:a})):r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("p",null,"No Announcements yet")),Object.keys(s).length>1&&r.a.createElement(K,{isModalOpened:Object.keys(s).length>1,itemToBeEdited:s,onSubmit:this.editAnnouncement,isSubmitting:u,closeModal:function(){return e.setState({announcementToBeEdited:{}})}}),r.a.createElement(K,{isModalOpened:l,isSubmitting:u,onSubmit:this.createAnnouncement,closeModal:function(){return e.setState({isCreateModalOpened:!1})}}),r.a.createElement(B.a,{show:!!n,success:!0,title:n||" ",timeout:2e3,onConfirm:function(){return e.setState({successAlert:null})}}),r.a.createElement(B.a,{show:!!i,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({errorAlert:null})}},i),r.a.createElement(B.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",onConfirm:function(){e.removeAnnouncement(c,!0),e.setState({idOfItemToBeDeleted:""})},onCancel:function(){return e.setState({idOfItemToBeDeleted:""})},focusCancelBtn:!0,show:!!c},"You will not be able to recover this item !"))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={committee:{name:""},isLoading:!1},a.formatDate=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState({committee:Object(T.a)({},a.state.committee,Object(M.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.committee;a.props.onSubmit(t,!0).then((function(){a.resetObj(t),a.setState({committee:t})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.itemToBeEdited;e&&(e.date=this.formatDate(),this.setState({committee:e}))}},{key:"resetObj",value:function(e){for(var t in e)e[t]=""}},{key:"render",value:function(){var e=this.props,t=e.isModalOpened,a=e.itemToBeEdited,n=e.closeModal,i=e.isSubmitting,s=this.state,c=s.committee,o=s.isLoading;return r.a.createElement(U.Modal,{open:t,onClose:function(){return n()},center:!0,styles:{modal:{animation:"".concat(t?"customEnterAnimation":"customLeaveAnimation"," 500ms")}}},o?r.a.createElement(I,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mb-3"}," Committee "),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement(P,{type:"text",required:!0,placeholder:"Committee name",label:"Name",id:"name",name:"name",errorPosition:"bottom",value:c.name,onChange:this.handleChange}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:i},i?"Loading ...":a?"Save":"Create"))))}}]),t}(n.Component),ae=[{path:"/",label:"Home",component:N},{path:"/login",component:_},{path:"/users",label:"Users",component:$},{path:"/users/:id",component:G},{path:"/committees",label:"Committees",component:function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).tableConfig={tableHeaders:["name"],className:"table-striped",actions:["edit","delete"]},a.state={committees:[],successAlert:"",errorAlert:"",committeeToBeEdited:{},isLoading:!1,isCreateModalOpened:!1,isSubmitting:!1,idOfItemToBeDeleted:""},a._committeeService=void 0,a._userService=void 0,a.createCommittee=function(e){var t=a.state.committees;return a.setState({isSubmitting:!0}),a._committeeService.create(e).then((function(e){t.unshift(e),a.setState({committees:t,successAlert:"Committee added successfully",errorAlert:"",isCreateModalOpened:!1,isSubmitting:!1})})).catch((function(e){a.setState({errorAlert:"An error occurred",successAlert:"",isSubmitting:!1})}))},a.editCommittee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.committeeToBeEdited._id;if(t)return a.setState({isSubmitting:!0}),a._committeeService.update(n,e).then((function(e){a.updateStateWithNewCommittee(e),a.setState({isSubmitting:!1,successAlert:"Committee updated successfully",errorAlert:"",committeeToBeEdited:{}})})).catch((function(e){a.setState({errorAlert:e.response.data.msg})}));a.setState({isSubmitting:!1,committeeToBeEdited:e})},a.updateStateWithNewCommittee=function(e){var t=a.state.committees,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1,e),a.setState({committees:t})},a.removeCommittee=function(e,t){var n=a.state.committees;t?a._committeeService.delete(e).then((function(){a.setState({committees:n.filter((function(t){return t._id!==e}))})})).catch((function(e){a.setState({errorAlert:e.response.data.msg})})):a.setState({idOfItemToBeDeleted:e})},a._committeeService=new Z,a._userService=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._userService.isUserLoggedIn()){e.next=2;break}return e.abrupt("return",this.props.history.push("/login"));case 2:return this.setState({isLoading:!0}),e.prev=3,e.next=6,this._committeeService.list();case 6:t=e.sent,this.setState({committees:t,isLoading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({errorAlert:"Error retrieving items",isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.committees,n=t.successAlert,i=t.errorAlert,s=t.committeeToBeEdited,c=t.idOfItemToBeDeleted,o=t.isLoading,l=t.isCreateModalOpened,u=t.isSubmitting;return r.a.createElement(A,null,r.a.createElement("header",{className:"d-flex justify-content-between container mt-5"},r.a.createElement("h2",null," Committees "),r.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({isCreateModalOpened:!0})}},r.a.createElement(g.a,{icon:v.d})," Create New Committee")),o?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(I,null)):a.length>0?r.a.createElement("div",{className:"container mt-5"},r.a.createElement(D,{config:this.tableConfig,triggerEditEvent:this.editCommittee,deleteRow:this.removeCommittee,tableBody:a})):r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("p",null,"No committees yet")),Object.keys(s).length>1&&r.a.createElement(te,{isModalOpened:Object.keys(s).length>1,itemToBeEdited:s,onSubmit:this.editCommittee,isSubmitting:u,closeModal:function(){return e.setState({committeeToBeEdited:{}})}}),r.a.createElement(te,{isModalOpened:l,isSubmitting:u,onSubmit:this.createCommittee,closeModal:function(){return e.setState({isCreateModalOpened:!1})}}),r.a.createElement(B.a,{show:!!n,success:!0,title:n||" ",timeout:2e3,onConfirm:function(){return e.setState({successAlert:null})}}),r.a.createElement(B.a,{show:!!i,warning:!0,title:"An error occurred",timeout:2e3,onConfirm:function(){return e.setState({errorAlert:null})}},i),r.a.createElement(B.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:"Are you sure?",onConfirm:function(){e.removeCommittee(c,!0),e.setState({idOfItemToBeDeleted:""})},onCancel:function(){return e.setState({idOfItemToBeDeleted:""})},focusCancelBtn:!0,show:!!c},"You will not be able to recover this item !"))}}]),t}(n.Component),adminOnly:!0},{path:"/announcements",label:"Announcements",component:ee,adminOnly:!0}],ne=(a(44),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(h.c,null,ae.map((function(e,t){return r.a.createElement(h.a,{key:"adRoute".concat(t),exact:!0,path:e.path,component:e.component})}))))}}]),t}(n.Component));a(99);s.a.render(r.a.createElement(ne,null),document.getElementById("root"))},44:function(e,t,a){},47:function(e,t,a){e.exports=a(100)},53:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},78:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){}},[[47,1,2]]]);
//# sourceMappingURL=main.b9093a83.chunk.js.map